/* Activity color tokens.
   Strategy: saturated, emotionally distinct, and broad hue coverage.
   Titles/borders/pills all consume these same accents, so each color keeps strong contrast on both themes. */
@theme inline {
  /* Feed sentiment: deep raspberry, energetic + nurturing, and the primary red/pink family item. */
  /* Old: --color-activity-feed-background: oklch(0.63 0.2 10); */
  --color-activity-feed-background: oklch(0.64 0.24 12);

  /* Sleep sentiment: vivid indigo for night + calm, clearly separate from feed. */
  /* Old: --color-activity-sleep-background: var(--color-indigo-500); */
  --color-activity-sleep-background: oklch(0.59 0.2 281);

  /* Nappy sentiment: cute-but-realistic warm amber/orange (pee/poo association). */
  /* Old: --color-activity-nappy-background: var(--color-orange-500); */
  --color-activity-nappy-background: oklch(0.68 0.2 58);

  /* Solids sentiment: mango-gold (food warmth, appetite, positive energy). */
  /* Old: --color-activity-solids-background: var(--color-yellow-500); */
  --color-activity-solids-background: oklch(0.67 0.18 93);

  /* Bath sentiment: clean water blue, fresh and hygienic. */
  /* Old: --color-activity-bath-background: var(--color-sky-500); */
  --color-activity-bath-background: oklch(0.65 0.16 239);

  /* Tummy time sentiment: active teal-green (movement + growth). */
  /* Old: --color-activity-tummy-time-background: var(--color-teal-500); */
  --color-activity-tummy-time-background: oklch(0.67 0.15 162);

  /* Story time sentiment: imaginative purple. */
  /* Old: --color-activity-story-time-background: var(--color-violet-500); */
  --color-activity-story-time-background: oklch(0.64 0.19 304);

  /* Screen time sentiment: cool digital slate-blue (neutral tech feel). */
  /* Old: --color-activity-screen-time-background: var(--color-slate-500); */
  --color-activity-screen-time-background: oklch(0.58 0.08 258);

  /* Pumping sentiment: bright orchid to stay in feminine family but distinct from feed. */
  /* Old: --color-activity-pumping-background: oklch(0.68 0.13 330); */
  --color-activity-pumping-background: oklch(0.68 0.17 327);

  /* Skin-to-skin sentiment: warm peach-rose, intimate and gentle. */
  /* Old: --color-activity-skin-to-skin-background: var(--color-pink-500); */
  --color-activity-skin-to-skin-background: oklch(0.72 0.15 20);

  /* Outdoor play sentiment: bright leaf green, lively and natural. */
  /* Old: --color-activity-outdoor-play-background: var(--color-green-500); */
  --color-activity-outdoor-play-background: oklch(0.68 0.19 146);

  /* Indoor play sentiment: playful apricot-orange (warm and energetic). */
  /* Old: --color-activity-indoor-play-background: oklch(0.68 0.09 175); */
  --color-activity-indoor-play-background: oklch(0.71 0.16 53);

  /* Brush teeth sentiment: cool mint-cyan freshness. */
  /* Old: --color-activity-brush-teeth-background: var(--color-cyan-500); */
  --color-activity-brush-teeth-background: oklch(0.69 0.13 206);

  /* Growth sentiment: saturated emerald for health/development (major activity). */
  /* Old: --color-activity-growth-background: var(--color-emerald-500); */
  --color-activity-growth-background: oklch(0.64 0.2 154);

  /* Medication sentiment: alert red-orange for caution/clinical actions. */
  /* Old: --color-activity-medication-background: var(--color-red-400); */
  --color-activity-medication-background: oklch(0.64 0.22 30);

  /* Generic activity sentiment: bright violet for miscellaneous high-energy actions. */
  /* Old: --color-activity-activity-background: var(--color-purple-500); */
  --color-activity-activity-background: oklch(0.66 0.19 286);
}

/* Wide-gamut upgrade for modern displays (keeps fallback above for non-P3 screens). */
@supports (color: color(display-p3 1 0 0)) {
  :root {
    --color-activity-feed-background: color(display-p3 0.92 0.18 0.4);
    --color-activity-sleep-background: color(display-p3 0.3 0.34 0.96);
    --color-activity-nappy-background: color(display-p3 0.95 0.52 0.1);
    --color-activity-solids-background: color(display-p3 0.92 0.68 0.06);
    --color-activity-growth-background: color(display-p3 0 0.72 0.4);
    --color-activity-bath-background: color(display-p3 0.1 0.62 0.95);
    --color-activity-pumping-background: color(display-p3 0.78 0.34 0.8);
  }
}

@layer components {
  /* Shared shadow + border-radius for activity tile cards (used by overview tiles and log items) */
  .activity-tile-card {
    border-radius: 3px 10px 10px 3px;
    box-shadow: 0px 2px 4px 1px rgba(0, 0, 0, 0.08);
  }

  .dark .activity-tile-card {
    box-shadow: 0px 2px 4px 1px rgba(0, 0, 0, 0.25);
  }

  .activity-tile {
    @apply flex w-full items-center justify-between border-l-4 p-4 text-left transition-colors;
    /* White background with subtle shadow */
    background-color: var(--card);
    /* Accent color on left border */
    border-left-color: var(--activity-tile-accent, var(--border));
  }

  .activity-tile:hover:not(:disabled) {
    background-color: color-mix(in oklab, var(--card) 95%, var(--activity-tile-accent, var(--border)) 5%);
  }

  .activity-tile:disabled {
    cursor: not-allowed;
    opacity: 0.6;
  }

  /* Action pill (+ icon or timer) - 28px height */
  .activity-tile-action {
    @apply flex h-7 items-center gap-1.5 rounded-lg px-2;
    /* 15% opacity of the activity accent color as background (85% transparent) */
    background-color: color-mix(in srgb, var(--activity-tile-accent, var(--primary)) 15%, transparent);
    color: var(--activity-tile-accent, var(--primary));
  }

  /* Pulsing status dot for running timer */
  .activity-tile-pulse {
    @apply ml-0.5 h-2 w-2 rounded-full;
    background-color: var(--activity-tile-accent, var(--primary));
    animation: activity-pulse 2s ease-in-out infinite;
  }

  @keyframes activity-pulse {
    0%,
    100% {
      opacity: 1;
      transform: scale(1);
    }
    50% {
      opacity: 0.4;
      transform: scale(0.85);
    }
  }

  /* Activity tile accents - the background color becomes the accent (border/title/pill) */
  .activity-tile--feed {
    --activity-tile-accent: var(--color-activity-feed-background);
  }

  .activity-tile--sleep {
    --activity-tile-accent: var(--color-activity-sleep-background);
  }

  .activity-tile--nappy {
    --activity-tile-accent: var(--color-activity-nappy-background);
  }

  .activity-tile--solids {
    --activity-tile-accent: var(--color-activity-solids-background);
  }

  .activity-tile--pumping {
    --activity-tile-accent: var(--color-activity-pumping-background);
  }

  .activity-tile--bath {
    --activity-tile-accent: var(--color-activity-bath-background);
  }

  .activity-tile--tummy-time {
    --activity-tile-accent: var(--color-activity-tummy-time-background);
  }

  .activity-tile--story-time {
    --activity-tile-accent: var(--color-activity-story-time-background);
  }

  .activity-tile--screen-time {
    --activity-tile-accent: var(--color-activity-screen-time-background);
  }

  .activity-tile--skin-to-skin {
    --activity-tile-accent: var(--color-activity-skin-to-skin-background);
  }

  .activity-tile--outdoor-play {
    --activity-tile-accent: var(--color-activity-outdoor-play-background);
  }

  .activity-tile--indoor-play {
    --activity-tile-accent: var(--color-activity-indoor-play-background);
  }

  .activity-tile--brush-teeth {
    --activity-tile-accent: var(--color-activity-brush-teeth-background);
  }

  .activity-tile--growth {
    --activity-tile-accent: var(--color-activity-growth-background);
  }

  .activity-tile--medication {
    --activity-tile-accent: var(--color-activity-medication-background);
  }

  .activity-tile--activity {
    --activity-tile-accent: var(--color-activity-activity-background);
  }

  /* Timeline chart activity blocks */
  .activity-block {
    @apply absolute left-0.5 right-0.5 cursor-pointer overflow-hidden rounded text-left transition-opacity;
  }

  .activity-block:hover {
    @apply opacity-90;
  }

  .activity-block--feed {
    background-color: var(--color-activity-feed-background);
  }

  .activity-block--sleep {
    background-color: var(--color-activity-sleep-background);
  }

  .activity-block--nappy {
    background-color: var(--color-activity-nappy-background);
  }

  .activity-block--solids {
    background-color: var(--color-activity-solids-background);
  }

  .activity-block--pumping {
    background-color: var(--color-activity-pumping-background);
  }

  .activity-block--bath {
    background-color: var(--color-activity-bath-background);
  }

  .activity-block--tummy-time {
    background-color: var(--color-activity-tummy-time-background);
  }

  .activity-block--story-time {
    background-color: var(--color-activity-story-time-background);
  }

  .activity-block--screen-time {
    background-color: var(--color-activity-screen-time-background);
  }

  .activity-block--skin-to-skin {
    background-color: var(--color-activity-skin-to-skin-background);
  }

  .activity-block--outdoor-play {
    background-color: var(--color-activity-outdoor-play-background);
  }

  .activity-block--indoor-play {
    background-color: var(--color-activity-indoor-play-background);
  }

  .activity-block--brush-teeth {
    background-color: var(--color-activity-brush-teeth-background);
  }

  .activity-block--growth {
    background-color: var(--color-activity-growth-background);
  }

  .activity-block--medication {
    background-color: var(--color-activity-medication-background);
  }

  .activity-block--activity {
    background-color: var(--color-activity-activity-background);
  }

  /* Activity filter pill classes (for selected state) */
  .activity-pill--feed {
    background-color: var(--color-activity-feed-background);
  }

  .activity-pill--sleep {
    background-color: var(--color-activity-sleep-background);
  }

  .activity-pill--nappy {
    background-color: var(--color-activity-nappy-background);
  }

  .activity-pill--solids {
    background-color: var(--color-activity-solids-background);
  }

  .activity-pill--pumping {
    background-color: var(--color-activity-pumping-background);
  }

  .activity-pill--growth {
    background-color: var(--color-activity-growth-background);
  }

  .activity-pill--bath {
    background-color: var(--color-activity-bath-background);
  }

  .activity-pill--medication {
    background-color: var(--color-activity-medication-background);
  }

  .activity-pill--activity {
    background-color: var(--color-activity-activity-background);
  }
}
