---
last_verified_at: 2026-01-04T08:52:00Z
source_paths:
  - eslint.config.mjs
  - src/components/navigation/AppHeader.tsx
  - src/templates/AppShell.tsx
  - commitlint.config.ts
---

# Antfu ESLint Configuration

## Purpose
Documents the Antfu ESLint configuration with React, Next.js, Tailwind, and accessibility plugins, including project-specific formatting preferences.

## Key Deviations from Standard

This project uses **@antfu/eslint-config**, which provides opinionated defaults for TypeScript, React, and Next.js projects. Unlike standard ESLint configs, Antfu's setup:

- Uses **flat config format** (ESLint 9+)
- Enforces **specific ternary operator formatting** (parentheses with line breaks)
- Prefers **`type` over `interface`** for TypeScript definitions
- Includes **stylistic rules** built-in (via ESLint Stylistic)
- Configures **accessibility** (jsx-a11y), **Tailwind CSS**, and **Playwright** rules automatically

## Implementation

### Base Configuration

```typescript
// eslint.config.mjs
import antfu from '@antfu/eslint-config';

export default antfu({
  react: true,
  nextjs: true,
  typescript: true,
  lessOpinionated: true,
  stylistic: { semi: true },
  formatters: { css: true },
});
```

### Plugin Composition

The config layers multiple plugins in sequence:

1. **Antfu base** - TypeScript, React, Next.js rules
2. **jsx-a11y** - Accessibility checks (`jsxA11y.flatConfigs.recommended`)
3. **Tailwind CSS** - Class name linting (`tailwind.configs['flat/recommended']`)
4. **Playwright** - E2E test rules (applied to `*.spec.ts` and `*.e2e.ts` files only)

### Tailwind CSS Configuration

The Tailwind plugin requires a custom settings path:

```typescript
{
  settings: {
    tailwindcss: {
      config: `${dirname(fileURLToPath(import.meta.url))}/src/styles/global.css`,
    },
  },
}
```

### Ignored Paths

```typescript
ignores: [
  'migrations/**/*',
  '.readme-human/**/*',
  '.readme/**/*',
]
```

### Custom Rule Overrides

```typescript
{
  rules: {
    'antfu/no-top-level-await': 'off',              // Allow top-level await
    'style/brace-style': ['error', '1tbs'],          // One True Brace Style
    'ts/consistent-type-definitions': ['error', 'type'], // Prefer `type` over `interface`
    'react/prefer-destructuring-assignment': 'off',  // Don't enforce destructuring
    'node/prefer-global/process': 'off',             // Allow `process.env`
    'test/padding-around-all': 'error',              // Require padding in test files
    'test/prefer-lowercase-title': 'off',            // Allow uppercase test titles
  }
}
```

## Patterns

### Ternary Operator Formatting

Antfu enforces a **specific multiline ternary style** with parentheses around each branch:

**Preferred (auto-formatted by ESLint):**
```tsx
{ variant === 'unwrapped'
  ? (
      children
    )
  : (
      <div className="wrapper">
        {children}
      </div>
    ); }
```

**Avoid (will be auto-fixed):**
```tsx
{ variant === 'unwrapped'
  ? (
      children
    )
  : (
      <div className="wrapper">
        {children}
      </div>
    ); }
```

**Key characteristics:**
- Condition on same line as opening brace
- Question mark `?` on new line, indented
- Each branch wrapped in parentheses
- Colon `:` aligned with question mark

### Nested Ternaries

When nesting ternaries, maintain the same indentation pattern:

```tsx
{ hasBreadcrumbs
  ? (
      <Breadcrumb>...</Breadcrumb>
    )
  : pageTitle
    ? (
        <span>{pageTitle}</span>
      )
    : null; }
```

### TypeScript Type Definitions

Always use `type` instead of `interface`:

```typescript
// Preferred
type AppShellProps = {
  children: React.ReactNode;
  locale: string;
};

// Avoid (will trigger linting error)
type AppShellProps = {
  children: React.ReactNode;
  locale: string;
};
```

**Exception:** When you need to define inline type annotations without creating a named type, use inline annotations:

```typescript
// Before
import type { UserConfig } from '@commitlint/types';
const Configuration: UserConfig = { ... };

// After (more concise)
const Configuration = {
  ignores: [(message: string) => message.startsWith('chore: bump')],
};
```

### Semicolons

Always use semicolons (configured via `stylistic: { semi: true }`):

```typescript
const foo = 'bar'; // ✓ Correct
const foo = 'bar'; // ✗ Avoid
```

## Gotchas

### Tailwind CSS Config Path

The Tailwind ESLint plugin is configured to read classes from `src/styles/global.css`:

```typescript
settings: {
  tailwindcss: {
    config: `${dirname(fileURLToPath(import.meta.url))}/src/styles/global.css`,
  },
}
```

This is **non-standard** - typically it points to `tailwind.config.js`. In this project, Tailwind CSS 4 uses CSS-based configuration, so the ESLint plugin needs the CSS file path.

### Ignored Paths

The `migrations/` directory is ignored by ESLint:

```typescript
ignores: ['migrations/**/*'];
```

Database migration files are auto-generated by Drizzle and should not be linted.

### Playwright Rules Scoping

Playwright rules only apply to test files:

```typescript
{
  files: ['**/*.spec.ts', '**/*.e2e.ts'],
  ...playwright.configs['flat/recommended'],
}
```

Regular source files won't have Playwright-specific linting.

### Auto-fix Behavior

Run `npm run lint:fix` to automatically fix formatting issues. The Antfu config includes auto-fixable stylistic rules, so manual formatting is rarely needed.

## Related

- `.readme/chunks/code-quality.typescript-strict.md` - TypeScript compiler strictness
- `.readme/chunks/code-quality.git-hooks.md` - Pre-commit linting via Lefthook
- `eslint.config.mjs` - Full ESLint configuration
- `CLAUDE.md` - Project code quality standards overview
