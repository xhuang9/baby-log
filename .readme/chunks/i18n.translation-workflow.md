---
last_verified_at: 2026-01-04T00:00:00Z
source_paths:
  - src/locales/
  - crowdin.yml
  - package.json
---

# Translation Management Workflow

## Purpose
Describes English-first translation file organization, optional Crowdin integration, and validation workflow.

## Key Deviations from Standard
- Developer only maintains English (`en`) translations
- Optional: other languages auto-generated and synced via Crowdin
- GitHub Actions automates sync when Crowdin is configured (push to main, manual trigger, daily at 5am)
- Build-time validation ensures translation completeness

## Translation File Structure

### Location: `src/locales/`
```
src/locales/
└── en.json          # English (developer maintains, single file)
                     # Optional: Add other locale files (e.g., fr.json, es.json)
                     # auto-generated by Crowdin
```

**Note:** The structure is flat - one JSON file per locale, not nested directories.

### File Format: Nested JSON
```json
{
  "RootLayout": {
    "home_link": "Home",
    "about_link": "About",
    "sign_in_link": "Sign in",
    "sign_up_link": "Sign up"
  },
  "HomePage": {
    "title": "Next.js Boilerplate",
    "description": "A production-ready starter"
  }
}
```

## Developer Workflow

### 1. Add English Translations
Edit `src/locales/en.json`:
```json
{
  "Dashboard": {
    "title": "Dashboard",
    "welcome": "Welcome back, {name}!"
  }
}
```

### 2. Use in Code
```typescript
import { getTranslations } from 'next-intl/server';

const t = await getTranslations('Dashboard');
const title = t('title'); // "Dashboard"
const welcome = t('welcome', { name: 'John' }); // "Welcome back, John!"
```

### 3. Validate Completeness
```bash
npm run check:i18n
```

Checks if all locales have same keys as English.

### 4. Push to Main Branch
```bash
git add src/locales/en.json
git commit -m "feat: add dashboard translations"
git push origin main
```

GitHub Actions syncs with Crowdin automatically.

### 5. Crowdin Translates
- Crowdin detects new keys
- Translators translate to other languages
- Crowdin creates PR with updated locale files
- Review and merge PR

## Crowdin Integration

### Configuration: `crowdin.yml`
```yaml
project_id: "your-project-id"
base_path: "."
files:
  - source: /src/locales/en.json
    translation: /src/locales/%two_letters_code%.json
```

### GitHub Actions Sync
Triggers:
1. Push to `main` branch
2. Manual workflow dispatch
3. Daily at 5:00 AM UTC

Workflow:
1. Uploads `en.json` to Crowdin
2. Downloads translated files
3. Creates PR if changes detected

## Translation Validation

### Command: `npm run check:i18n`
```bash
i18n-check -l src/locales -s en -u src -f next-intl
```

Checks:
- All locales have same keys as source (`en`)
- No missing translations
- No unused translation keys

### CI Integration
Add to GitHub Actions:
```yaml
- name: Check translations
  run: npm run check:i18n
```

## Important Patterns

### Namespaced Translations
```typescript
// Server component
const t = await getTranslations('Dashboard.Settings');
t('title'); // Accesses Dashboard.Settings.title

// Client component
const t = useTranslations('Dashboard.Settings');
```

### Pluralization
```json
{
  "items": {
    "zero": "No items",
    "one": "One item",
    "other": "{count} items"
  }
}
```

```typescript
t('items', { count: 0 }); // "No items"
t('items', { count: 1 }); // "One item"
t('items', { count: 5 }); // "5 items"
```

### Rich Text
```json
{
  "welcome": "Welcome to <bold>{name}</bold>"
}
```

```typescript
t.rich('welcome', {
  name: 'John',
  bold: (chunks) => <strong>{chunks}</strong>
});
```

## Gotchas / Constraints

- Never manually edit non-English locale files (overwritten by Crowdin)
- Translation keys are type-safe but only checked at runtime
- Missing keys throw errors in development, fallback in production
- Crowdin sync requires repository secrets configured
- Changes to `en.json` must be committed to trigger sync

## Related Systems
- `.readme/chunks/i18n.routing-integration.md` - Locale routing
- `.readme/chunks/i18n.clerk-localization.md` - Auth UI translations
